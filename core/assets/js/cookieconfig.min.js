"use strict";function complianz_deleteAllCookies(){document.cookie.split(";").forEach(function(e){-1===e.indexOf("cmplz_stats")&&-1===e.indexOf("cmplz_")&&-1===e.indexOf("complianz_consent_status")&&-1===e.indexOf("complianz_policy_id")&&(document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/"))})}jQuery(document).ready(function(t){var o,a,n=!1;function l(){console.log("enable all scripts"),n||i(),t(".cmplz-iframe").each(function(e,c){var o=t(this).data("src-cmplz");t(this).attr("src",o)}),t(".cmplz-script").each(function(e,c){var o=t(this).attr("src");o&&o.length?(t(this).attr("type","text/javascript"),t.getScript(o,function(){})):t(this).text().length&&(t("<script>").attr("type","text/javascript").text(t(this).text()).appendTo(t(this).parent()),t(this).remove())})}function i(){console.log("enable stats"),t(".cmplz-stats").each(function(e,c){if(t(this).text().length){var o=t(this).text();t("<script>").attr("type","text/javascript").text(o).appendTo(t(this).parent()),t(this).remove()}n=!0})}function s(e){console.log("fire "+e),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e})}var c=[];function p(e){e.do_not_track||(e.is_eu?(console.log("eu"),window.cookieconsent.initialise({cookie:{name:"complianz_consent_status",expiryDays:complianz.cookie_expiry},onInitialise:function(e){console.log("init"),"allow"===(o=e)&&this.hasConsented()&&(complianz_enable_cookies(),l())},onStatusChange:function(e,c){o=e,console.log("status change "+e),complianz.use_categories||r(),"allow"===e&&(complianz_enable_cookies(),l())},onRevokeChoice:function(){complianz.use_categories||"allow"!==o||r()},revokeBtn:'<div class="cc-revoke cc-bottom {{classes}}">'+complianz.revoke+"</div>",palette:{popup:{background:complianz.popup_background_color,text:complianz.popup_text_color},button:{background:complianz.button_background_color,text:complianz.button_text_color,border:complianz.border_color}},theme:complianz.theme,static:complianz.static,position:complianz.position,type:complianz.type,layout:complianz.layout,layouts:{"categories-layout":"{{messagelink}}{{categories-checkboxes}}{{compliance}}"},compliance:{categories:'<div class="cc-compliance cc-highlight">{{save}}</div>'},elements:{save:'<a aria-label="save cookies" tabindex="0" class="cc-btn cc-save">{{save_preferences}}</a>',"categories-checkboxes":complianz.categories,link:'<a aria-label="learn more about cookies" tabindex="0" class="cc-link" href="{{href}}">{{link}}</a>'},content:{save_preferences:complianz.save_preferences,message:complianz.message,dismiss:complianz.dismiss,allow:complianz.accept,link:complianz.readmore,href:complianz.readmore_url}},function(e){if(a=e,console.log("popup"),console.log(o),z()){if(function(){if(complianz.tm_categories)for(var e=0;e<complianz.cat_num;e++)"allow"===_("cmplz_event_"+e)&&t("#cmplz_"+e).prop("checked",!0);"allow"===_("cmplz_all")&&t("#cmplz_all").prop("checked",!0),"allow"===_("cmplz_stats")&&t("#cmplz_stats").prop("checked",!0)}(),complianz.tm_categories)for(var c=0;c<complianz.cat_num;c++)t("#cmplz_"+c+":checked + .cc-check svg").css({stroke:complianz.popup_text_color});t("#cmplz_functional:checked + .cc-check svg").css({stroke:complianz.popup_text_color}),t("#cmplz_all:checked + .cc-check svg").css({stroke:complianz.popup_text_color}),t(".cc-save").css({"border-color":complianz.border_color,"background-color":complianz.button_background_color,color:complianz.button_text_color}),t(".cc-check svg").css({stroke:complianz.popup_text_color}),u()}})):(console.log("not eu"),complianz_enable_cookies(),l())),!e.do_not_track&&e.is_eu||r("no-warning")}function r(e){(e=void 0!==e&&e)||(e=function(){if(z()){if("allow"===_("cmplz_all"))return"all";if(complianz.tm_categories)for(var e=complianz.cat_num-1;0<=e;e--)if("allow"===_("cmplz_event_"+e))return"cmplz_event_"+e;if("allow"===_("cmplz_stats"))return"stats"}else{var c=_("complianz_consent_status");if("allow"===c)return"all"}if("dismiss"===c)return"functional";return"no-choice"}()),t.ajax({type:"GET",url:complianz.url,dataType:"json",data:{action:"cmplz_accept",status:e}})}function m(e,c,o){if(o){var t=new Date;t.setTime(t.getTime()+24*o*60*60*1e3);var a="; expires="+t.toGMTString()}else a="";document.cookie=e+"="+c+a+"; path=/"}function _(e){for(var c=e+"=",o=window.document.cookie.split(";"),t=0;t<o.length;t++){var a=o[t].trim();if(0==a.indexOf(c))return a.substring(c.length,a.length)}return""}function u(e){if(e=void 0!==e&&e,complianz.tm_categories&&s("cmplz_event_functional"),complianz.tm_categories)for(var c=0;c<complianz.cat_num;c++)(e||t("#cmplz_"+c).is(":checked"))&&s("cmplz_event_"+c);t("#cmplz_stats").length&&(e||t("#cmplz_stats").is(":checked"))&&i(),t("#cmplz_all").length&&(e||t("#cmplz_all").is(":checked"))&&(complianz.tm_categories&&s("cmplz_event_all"),complianz_enable_cookies(),l())}function z(){return t("#cmplz_functional").length}"undefined"!=typeof Storage&&sessionStorage.cmplz_user_data&&(c=JSON.parse(sessionStorage.cmplz_user_data)),0===c.length?t.ajax({type:"GET",url:complianz.url,dataType:"json",data:{action:"cmplz_user_settings"},success:function(e){c=e,sessionStorage.cmplz_user_data=JSON.stringify(c),p(c)}}):p(c),t(document).on("click",".cc-save",function(){a.setStatus(cookieconsent.status.dismiss),z()?(!function(){if(complianz.tm_categories)for(var e=0;e<complianz.cat_num;e++)t("#cmplz_"+e).is(":checked")?m("cmplz_event_"+e,"allow",complianz.cookie_expiry):(console.log("set event_"+e+" denied"),m("cmplz_event_"+e,"deny",complianz.cookie_expiry));t("#cmplz_stats").length&&(t("#cmplz_stats").is(":checked")?m("cmplz_stats","allow",complianz.cookie_expiry):m("cmplz_stats","deny",complianz.cookie_expiry));t("#cmplz_all").length&&(t("#cmplz_all").is(":checked")?m("cmplz_all","allow",complianz.cookie_expiry):m("cmplz_all","deny",complianz.cookie_expiry))}(),u()):console.log("no categories used"),r(),a.close(),t(".cc-revoke").fadeIn()}),t(document).on("click",".cc-revoke-custom",function(){t(".cc-revoke").click()})});