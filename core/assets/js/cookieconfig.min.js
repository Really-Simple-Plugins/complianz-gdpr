"use strict";jQuery(document).ready(function($){var ccStatus;var ccName;var ccStatsEnabled=false;var ccAllEnabled=false;var ccPrivacyLink="";var waitingInlineScripts=[];var waitingScripts=[];var placeholderClassIndex=0;var curClass="";$(document).on("click",".cc-btn",function(e){e.preventDefault()});function setStatusAsBodyClass(status){var ccBody=$("body");ccBody.removeClass(curClass);ccBody.addClass("cmplz-status-"+status);curClass="cmplz-status-"+status}setBlockedContentContainer();function setBlockedContentContainer(){$(".cmplz-placeholder-element").each(function(){if($(this).hasClass("cmplz-iframe")){var blockedContentContainer=$(this).parent()}else{var blockedContentContainer=$(this)}if(blockedContentContainer.hasClass("cmplz-blocked-content-container"))return;placeholderClassIndex++;blockedContentContainer.addClass("cmplz-placeholder-"+placeholderClassIndex);blockedContentContainer.addClass("cmplz-blocked-content-container");blockedContentContainer.data("placeholderClassIndex",placeholderClassIndex);var placeholderText=complianz.placeholdertext;if(typeof placeholderText!=="undefined")blockedContentContainer.append('<div class="cmplz-blocked-content-notice cmplz-accept-cookies">'+placeholderText+"</div>");var src=$(this).data("placeholder-image");if(typeof src!=="undefined"&&src.length){src=src.replace("url(","").replace(")","").replace(/\"/gi,"");$("head").append("<style>.cmplz-placeholder-"+placeholderClassIndex+" {background-image: url("+src+") !important;}</style>");setBlockedContentContainerAspectRatio($(this),src,placeholderClassIndex)}})}function setBlockedContentContainerAspectRatio(container,src,placeholderClassIndex){if(typeof container==="undefined")return;var blockedContentContainer=container.parent();var img=new Image;img.addEventListener("load",function(){var imgWidth=this.naturalWidth;var imgHeight=this.naturalHeight;if(imgWidth===0)imgWidth=1;var w=blockedContentContainer.width();var h=imgHeight*(w/imgWidth);var heightCSS="";if(src.indexOf("placeholder.jpg")===-1){heightCSS="height:"+h+"px;"}$("head").append("<style>.cmplz-placeholder-"+placeholderClassIndex+" {"+heightCSS+"}</style>")});img.src=src}$(window).bind("resize",function(e){$(window).resize(function(){clearTimeout(window.resizeEvt);window.resizeEvt=setTimeout(function(){setBlockedContentContainer()},100)})});function complianz_enable_scripts(){if(!complianz.use_categories&&!ccStatsEnabled){complianz_enable_stats()}if(ccAllEnabled)return;cmplzIntegrationsConsent();$(".cmplz-style-element").each(function(i,obj){var src=$(this).data("href");$("head").append('<link rel="stylesheet" type="text/css" href="'+src+'">')});$(".cmplz-blocked-content-notice").each(function(){$(this).remove()});$(".cmplz-iframe").each(function(i,obj){var blockedContentContainer=$(this).closest(".cmplz-blocked-content-container");var cssIndex=blockedContentContainer.data("placeholderClassIndex");blockedContentContainer.removeClass("cmplz-placeholder-"+cssIndex);blockedContentContainer.removeClass("cmplz-blocked-content-container");$(this).removeClass("cmplz-iframe-styles");$(this).removeClass("video-wrap");var src=$(this).data("src-cmplz");var autoplay=cmplzGetUrlParameter($(this).attr("src"),"autoplay");if(autoplay==="1")src=src+"&autoplay=1";$(this).attr("src",src);if(typeof $(this).parent().fitVids=="function"){$(this).parent().fitVids()}});$(".cmplz-placeholder-element").each(function(i,obj){var blockedContentContainer=$(this);var cssIndex=blockedContentContainer.data("placeholderClassIndex");blockedContentContainer.removeClass("cmplz-placeholder-"+cssIndex);blockedContentContainer.removeClass("cmplz-blocked-content-container");$(this).removeClass("cmplz-placeholder-element");$(this).removeClass("video-wrap");var src=$(this).data("src-cmplz");$(this).attr("src",src)});var scriptElements=$(".cmplz-script");scriptElements.each(function(i,obj){var waitfor=$(this).data("waitfor");var src=$(this).attr("src");if(src&&src.length){if(typeof waitfor!=="undefined"){waitingScripts[waitfor]=src}}else if($(this).text().length){if(typeof waitfor!=="undefined"){waitingInlineScripts[waitfor]=$(this)}}});scriptElements.each(function(i,obj){if($(this).hasClass("cmplz-stats"))return true;var src=$(this).attr("src");if(src&&src.length){$(this).attr("type","text/javascript");if(cmplzIsWaitingScript(waitingScripts,src)){return}if(typeof $(this).data("post_scribe_id")!=="undefined"){var psID="#"+$(this).data("post_scribe_id");if($(psID).length){$(psID).html("");$(function(){postscribe(psID,"<script src="+src+"><\/script>")})}}else{$.getScript(src).done(function(s,Status){var waitingScript=cmplzGetWaitingScript(waitingScripts,src);if(waitingScript){$.getScript(waitingScript).done(function(script,textStatus){cmplzRunAfterAllScripts()}).fail(function(jqxhr,settings,exception){console.warn("Something went wrong "+exception)})}var waitingInlineScript=cmplzGetWaitingScript(waitingInlineScripts,src);if(waitingInlineScript){cmplzRunInlineScript(waitingInlineScript)}cmplzRunAfterAllScripts()}).fail(function(jqxhr,settings,exception){console.warn("Something went wrong "+exception)})}}else if($(this).text().length){if(cmplzIsWaitingScript(waitingInlineScripts,$(this).text())){return}cmplzRunInlineScript($(this));var waitingScript=cmplzGetWaitingScript(waitingScripts,$(this).text());if(waitingScript!==false){$.getScript(waitingScript).done(function(s,Status){cmplzRunAfterAllScripts()}).fail(function(jqxhr,settings,exception){console.warn("Something went wrong "+exception)})}}});$.event.trigger({type:"cmplzEnableScripts",consentLevel:"all"});ccAllEnabled=true}function cmplzGetWaitingScript(waitingScripts,src){for(var waitfor in waitingScripts){var waitingScript;if(waitingScripts.hasOwnProperty(waitfor)){waitingScript=waitingScripts[waitfor];if(typeof waitingScript!=="string")waitingScript=waitingScript.text();if(src.indexOf(waitfor)!==-1){var output=waitingScripts[waitfor];delete waitingScripts[waitfor];return output}}}return false}function cmplzIsWaitingScript(waitingScripts,srcOrScript){for(var waitfor in waitingScripts){if(waitingScripts.hasOwnProperty(waitfor)){var waitingScript=waitingScripts[waitfor];if(typeof waitingScript!=="string")waitingScript=waitingScript.text();if(srcOrScript.indexOf(waitingScript)!==-1||waitingScript.indexOf(srcOrScript)!==-1){return true}}}return false}function cmplzRunAfterAllScripts(){if(waitingInlineScripts.length===0&&waitingScripts.length===0){if($(".happyforms-form").length)$(".happyforms-form").happyForm()}}function cmplzRunInlineScript(script){$("<script>").attr("type","text/javascript").text(script.text()).appendTo(script.parent());script.remove()}function complianz_enable_stats(){console.log("fire statistics");$(".cmplz-script.cmplz-stats").each(function(i,obj){if($(this).text().length){var str=$(this).text();$("<script>").attr("type","text/javascript").text(str).appendTo($(this).parent());$(this).remove()}ccStatsEnabled=true});$.event.trigger({type:"cmplzEnableScripts",consentLevel:"statistics"})}var cmplzFiredEvents=[];function cmplzRunTmEvent(event){if(cmplzFiredEvents.indexOf(event)===-1){console.log("fire "+event);cmplzFiredEvents.push(event);window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:event})}}var cmplz_user_data=[];if(typeof Storage!=="undefined"&&sessionStorage.cmplz_user_data){cmplz_user_data=JSON.parse(sessionStorage.cmplz_user_data)}if(complianz.geoip&&(cmplz_user_data.length===0||cmplz_user_data.version!==complianz.version||cmplz_user_data.banner_version!==complianz.banner_version)){$.ajax({type:"GET",url:complianz.url,dataType:"json",data:{action:"cmplz_user_settings"},success:function(response){cmplz_user_data=response;sessionStorage.cmplz_user_data=JSON.stringify(cmplz_user_data);conditionally_show_warning()}})}else{conditionally_show_warning()}function conditionally_show_warning(){complianz=cmplzMergeObject(complianz,cmplz_user_data);cmplzIntegrationsInit();cmplzCheckCookiePolicyID();$.event.trigger({type:"cmplzCookieBannerData",data:complianz});if(cmplzGetCookie("cmplz_choice")!=="set"){if(complianz.do_not_track||complianz.consenttype!=="optin"&&complianz.consenttype!=="optout"){complianz_track_status("no-warning")}else if(complianz.consenttype==="optout"){complianz_track_status("all")}else{complianz_track_status("no-choice")}}if(!complianz.do_not_track){if(complianz.consenttype==="optin"){setStatusAsBodyClass("deny");if(complianz.forceEnableStats){complianz.categories=cmplzRemoveStatisticsCategory(complianz.categories);complianz_enable_stats()}complianz.dismiss_on_scroll=false;complianz.dismiss_on_timeout=false;complianz.readmore=complianz.readmore_optin;complianz.message=complianz.message_optin;console.log("opt-in");cmplz_cookie_warning()}else if(complianz.consenttype==="optout"){console.log("opt-out");setStatusAsBodyClass("allow");complianz.type="opt-out";complianz.layout="basic";complianz.readmore_url=complianz.readmore_url_us;complianz.readmore=complianz.readmore_optout;complianz.dismiss=complianz.accept_informational;complianz.message=complianz.message_optout;ccPrivacyLink=complianz.privacy_link;cmplz_cookie_warning()}else{console.log("other consenttype, no cookie warning");cmplzAcceptAllCookies()}}else{setStatusAsBodyClass("deny")}}function cmplz_cookie_warning(){if(complianz.use_custom_cookie_css)$("<style>").prop("type","text/css").html(complianz.custom_css).appendTo("head");window.cookieconsent.initialise({cookie:{name:"complianz_consent_status",expiryDays:complianz.cookie_expiry},onInitialise:function(status){ccStatus=status;if(complianz.soft_cookiewall&&(status==="allow"||status==="dismiss")){$("#cc-banner-wrap").removeClass("cmplz-soft-cookiewall")}if(status==="allow"){cmplzAcceptAllCookies()}},onStatusChange:function(status,chosenBefore){if(complianz.soft_cookiewall&&(status==="allow"||status==="dismiss")){$("#cc-banner-wrap").removeClass("cmplz-soft-cookiewall")}if((complianz.dismiss_on_scroll||complianz.dismiss_on_timeout)&&(status==="dismiss"||status==="allow")){cmplzSetCookie("complianz_consent_status","allow",complianz.cookie_expiry);ccName.close();$(".cc-revoke").fadeIn()}ccStatus=status;if(!complianz.use_categories){complianz_track_status()}if(status==="allow"){cmplzAcceptAllCookies()}if(status==="deny"&&complianz.consenttype==="optout"){cmplzRevoke();complianz_track_status();location.reload()}},onRevokeChoice:function(){if(complianz.soft_cookiewall){$("#cc-banner-wrap").addClass("cmplz-soft-cookiewall")}if(!complianz.use_categories&&ccStatus==="allow"){cmplzRevoke();complianz_track_status();location.reload()}},dismissOnTimeout:parseInt(complianz.dismiss_on_timeout),dismissOnScroll:parseInt(complianz.dismiss_on_scroll),dismissOnWindowClick:true,revokeBtn:'<div class="cc-revoke '+complianz.hide_revoke+' {{classes}}">'+complianz.revoke+"</div>",palette:{popup:{background:complianz.popup_background_color,text:complianz.popup_text_color},button:{background:complianz.button_background_color,text:complianz.button_text_color,border:complianz.border_color}},theme:complianz.theme,static:complianz.static,position:complianz.position,type:complianz.type,layout:complianz.layout,layouts:{"categories-layout":"{{messagelink}}{{categories-checkboxes}}{{compliance}}",compliance:"{{messagelink}}{{compliance}}"},compliance:{categories:'<div class="cc-compliance cc-highlight">{{save}}</div>'},elements:{dismiss:'<a aria-label="dismiss cookie message" href="#" role="button" tabindex="0" class="cc-btn cc-dismiss">{{dismiss}}</a>',allow:'<a aria-label="allow cookies" href="#" role="button" tabindex="0" class="cc-btn cc-allow">{{allow}}</a>',save:'<a aria-label="save cookies" href="#" tabindex="0" class="cc-btn cc-save">{{save_preferences}}</a>',"categories-checkboxes":complianz.categories,messagelink:'<span id="cookieconsent:desc" class="cc-message">{{message}} <a aria-label="learn more about cookies" tabindex="0" class="cc-link" href="{{href}}">{{link}}</a>'+ccPrivacyLink+"</span>"},content:{save_preferences:complianz.save_preferences,deny:"",message:complianz.message,dismiss:complianz.dismiss,allow:complianz.accept,link:complianz.readmore,href:complianz.readmore_url}},function(popup){ccName=popup;if(complianz.soft_cookiewall)$(".cc-window").wrap('<div id="cc-banner-wrap"></div>');if(complianz.soft_cookiewall&&ccStatus==undefined){$("#cc-banner-wrap").addClass("cmplz-soft-cookiewall")}if(complianz.consenttype!=="optout"&&complianz.use_categories){cmplzSyncCategoryCheckboxes();if(complianz.tm_categories){for(var i=0;i<complianz.cat_num;i++){$("#cmplz_"+i+":checked + .cc-check svg").css({stroke:complianz.popup_text_color})}}$("#cmplz_functional:checked + .cc-check svg").css({stroke:complianz.popup_text_color});$("#cmplz_all:checked + .cc-check svg").css({stroke:complianz.popup_text_color});$(".cc-save").css({"border-color":complianz.border_color,"background-color":complianz.button_background_color,color:complianz.button_text_color});$(".cc-check svg").css({stroke:complianz.popup_text_color})}cmplzFireCategories();if(complianz.consenttype==="optout"&&cmplzGetCookie("complianz_consent_status")!=="deny"){cmplzAcceptAllCookies()}$.event.trigger({type:"cmplzCookieWarningLoaded",consentType:complianz.consenttype})})}$(document).on("click",".cc-save",function(){cmplzSaveCategoriesSelection()});function cmplzRemoveStatisticsCategory(categories){if(complianz.use_categories&&complianz.forceEnableStats){return categories.replace(/(.*)(<label><input type="checkbox" id="cmplz_stats".*?<\/label>.*?><\/label>)(.*)/g,function(a,b,c,d){return b+d})}return categories}function cmplzSaveCategoriesSelection(){ccName.setStatus("dismiss");var reload=false;if($("#cmplz_all").length){if(!$("#cmplz_all").is(":checked")&&cmplzGetCookie("cmplz_all")==="allow"){reload=true}}if(complianz.tm_categories){for(var i=0;i<complianz.cat_num;i++){if($("#cmplz_"+i).is(":checked")){cmplzSetCookie("cmplz_event_"+i,"allow",complianz.cookie_expiry)}else{cmplzSetCookie("cmplz_event_"+i,"deny",complianz.cookie_expiry)}}}if($("#cmplz_stats").length){if($("#cmplz_stats").is(":checked")){cmplzSetCookie("cmplz_stats","allow",complianz.cookie_expiry)}else{cmplzSetCookie("cmplz_stats","deny",complianz.cookie_expiry)}}if($("#cmplz_all").length){if($("#cmplz_all").is(":checked")){cmplzSetCookie("cmplz_all","allow",complianz.cookie_expiry)}else{cmplzSetCookie("cmplz_all","deny",complianz.cookie_expiry)}}cmplzFireCategories();complianz_track_status();if(cmplzGetHighestAcceptance()==="no-choice"||cmplzGetHighestAcceptance()==="functional"){cmplzRevoke()}else{cmplzSetAcceptedCookiePolicyID()}ccName.close();$(".cc-revoke").fadeIn();if(reload)location.reload()}function complianz_track_status(status){status=typeof status!=="undefined"?status:false;if(!status)status=cmplzGetHighestAcceptance();if(status)setStatusAsBodyClass(status);if(!complianz.a_b_testing)return;cmplzSetCookie("cmplz_choice","set",complianz.cookie_expiry);$.ajax({type:"GET",url:complianz.url,dataType:"json",data:{action:"cmplz_track_status",status:status,consenttype:complianz.consenttype}})}$(document).on("click",".cc-revoke-custom",function(){if(complianz.consenttype==="optin"){$(".cc-revoke").click()}else{if(cmplzGetCookie("complianz_consent_status")==="deny"){$(".cc-revoke").click();complianz_track_status("all")}else{cmplzSetCookie("complianz_consent_status","deny",complianz.cookie_expiry);complianz_track_status("functional");ccName.close();$(".cc-revoke").fadeIn()}cmplzUpdateStatusCustomLink()}});$(document).on("click",".cmplz-accept-cookies",function(event){event.preventDefault();if(complianz.use_categories){cmplzSetCookie("cmplz_all","allow",complianz.cookie_expiry);cmplzSyncCategoryCheckboxes();cmplzSaveCategoriesSelection()}else{ccName.setStatus(cookieconsent.status.allow);cmplzAcceptAllCookies();ccName.close();$(".cc-revoke").fadeIn()}});cmplzUpdateStatusCustomLink();function cmplzUpdateStatusCustomLink(){if($(".cc-revoke-custom").length){if(complianz.consenttype==="optout"){var accepted=$("#cmplz-document").find(".cmplz-status-accepted");var denied=$("#cmplz-document").find(".cmplz-status-denied");if(cmplzGetCookie("complianz_consent_status")==="deny"){accepted.hide();denied.show()}else{accepted.show();denied.hide()}}}}function cmplzSetCookie(name,value,days){var secure=";secure";var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);var expires=";expires="+date.toGMTString();if(window.location.protocol!=="https:")secure="";document.cookie=name+"="+value+secure+expires+";path=/"}function cmplzGetCookie(cname){var name=cname+"=";var cArr=window.document.cookie.split(";");for(var i=0;i<cArr.length;i++){var c=cArr[i].trim();if(c.indexOf(name)==0)return c.substring(name.length,c.length)}return""}function cmplzGetHighestAcceptance(){var status=cmplzGetCookie("complianz_consent_status");if(complianz.use_categories){if(cmplzGetCookie("cmplz_all")==="allow"){return"all"}if(complianz.tm_categories){for(var i=complianz.cat_num-1;i>=0;i--){if(cmplzGetCookie("cmplz_event_"+i)==="allow"){return"cmplz_event_"+i}}}if(cmplzGetCookie("cmplz_stats")==="allow"){return"stats"}}else{if(status==="allow"||status==="dismiss"&&complianz.consenttype==="optout"){return"all"}}if(status==="dismiss"){return"functional"}return"no-choice"}function cmplzAcceptAllCookies(){setStatusAsBodyClass("allow");cmplzSetAcceptedCookiePolicyID();cmplzFireCategories(true)}function cmplzFireCategories(all){all=typeof all!=="undefined"?all:false;cmplzRunTmEvent("cmplz_event_functional");if(complianz.tm_categories){for(var i=0;i<complianz.cat_num;i++){if(all||$("#cmplz_"+i).is(":checked")){cmplzRunTmEvent("cmplz_event_"+i)}}}else if(all||$("#cmplz_stats").length&&$("#cmplz_stats").is(":checked")){complianz_enable_stats()}if(all||$("#cmplz_all").length&&$("#cmplz_all").is(":checked")){cmplzRunTmEvent("cmplz_event_all");complianz_enable_cookies();complianz_enable_scripts()}}function cmplzSyncCategoryCheckboxes(){if(complianz.tm_categories){for(var i=0;i<complianz.cat_num;i++){if(cmplzGetCookie("cmplz_event_"+i)==="allow")$("#cmplz_"+i).prop("checked",true)}}if(cmplzGetCookie("cmplz_all")==="allow")$("#cmplz_all").prop("checked",true);if(cmplzGetCookie("cmplz_stats")==="allow")$("#cmplz_stats").prop("checked",true)}function cmplzMergeObject(userdata,ajax_data){var output=[];for(var key in userdata){output[key]=userdata[key]}for(var key in ajax_data){output[key]=ajax_data[key]}return output}function cmplzCheckCookiePolicyID(){var user_policy_id=cmplzGetCookie("complianz_policy_id");if(user_policy_id&&complianz.current_policy_id!=user_policy_id){cmplzSetCookie("complianz_consent_status","",0)}}function cmplzSetAcceptedCookiePolicyID(){cmplzSetCookie("complianz_policy_id",complianz.current_policy_id,complianz.cookie_expiry)}function cmplzIntegrationsInit(){cmplzIntegrationsRevoke()}function cmplzIntegrationsRevoke(){var cookiesToSet=complianz.set_cookies;for(var key in cookiesToSet){if(cookiesToSet.hasOwnProperty(key)){cmplzSetCookie(key,cookiesToSet[key][1],0)}}}function cmplzIntegrationsConsent(){var cookiesToSet=complianz.set_cookies;for(var key in cookiesToSet){if(cookiesToSet.hasOwnProperty(key)){cmplzSetCookie(key,cookiesToSet[key][0],complianz.cookie_expiry)}}}function cmplzRevoke(){document.cookie.split(";").forEach(function(c){if(c.indexOf("cmplz_stats")===-1&&c.indexOf("cmplz_")===-1&&c.indexOf("complianz_consent_status")===-1&&c.indexOf("complianz_policy_id")===-1){document.cookie=c.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}});cmplzIntegrationsRevoke()}function cmplzGetUrlParameter(sPageURL,sParam){var sURLVariables=sPageURL.split("&"),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split("=");if(sParameterName[0]===sParam){return sParameterName[1]===undefined?true:decodeURIComponent(sParameterName[1])}}}function cmplzInArray(needle,haystack){var length=haystack.length;for(var i=0;i<length;i++){if(haystack[i].indexOf(needle)!==-1)return true}return false}});