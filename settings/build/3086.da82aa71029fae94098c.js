"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[3086,8857,5671,849],{38857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var l=a(69307),n=a(99196),r=a(87462),s=a(36206),c=a(28771),i=a(25360),o=a(77342),d=a(57898),u=a(7546),p=a(75320);const h="Switch",[m,g]=(0,i.b)(h),[f,b]=m(h),_=(0,n.forwardRef)(((e,t)=>{const{__scopeSwitch:a,name:l,checked:i,defaultChecked:d,required:u,disabled:h,value:m="on",onCheckedChange:g,...b}=e,[_,E]=(0,n.useState)(null),k=(0,c.e)(t,(e=>E(e))),w=(0,n.useRef)(!1),S=!_||Boolean(_.closest("form")),[z=!1,C]=(0,o.T)({prop:i,defaultProp:d,onChange:g});return(0,n.createElement)(f,{scope:a,checked:z,disabled:h},(0,n.createElement)(p.WV.button,(0,r.Z)({type:"button",role:"switch","aria-checked":z,"aria-required":u,"data-state":y(z),"data-disabled":h?"":void 0,disabled:h,value:m},b,{ref:k,onClick:(0,s.M)(e.onClick,(e=>{C((e=>!e)),S&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())}))})),S&&(0,n.createElement)(v,{control:_,bubbles:!w.current,name:l,value:m,checked:z,required:u,disabled:h,style:{transform:"translateX(-100%)"}}))})),v=e=>{const{control:t,checked:a,bubbles:l=!0,...s}=e,c=(0,n.useRef)(null),i=(0,d.D)(a),o=(0,u.t)(t);return(0,n.useEffect)((()=>{const e=c.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(i!==a&&n){const t=new Event("click",{bubbles:l});n.call(e,a),e.dispatchEvent(t)}}),[i,a,l]),(0,n.createElement)("input",(0,r.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:a},s,{tabIndex:-1,ref:c,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return e?"checked":"unchecked"}const E=_,k=(0,n.forwardRef)(((e,t)=>{const{__scopeSwitch:a,...l}=e,s=b("SwitchThumb",a);return(0,n.createElement)(p.WV.span,(0,r.Z)({"data-state":y(s.checked),"data-disabled":s.disabled?"":void 0},l,{ref:t}))})),w=(0,n.memo)((e=>{let{value:t,onChange:a,required:n,disabled:r,className:s,label:c}=e,i=t;return"0"!==t&&"1"!==t||(i="1"===t),(0,l.createElement)("div",{className:"cmplz-input-group cmplz-switch-group"},(0,l.createElement)(E,{className:"cmplz-switch-root "+s,checked:i,onCheckedChange:a,disabled:r,required:n},(0,l.createElement)(k,{className:"cmplz-switch-thumb"})))}))},85671:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var l=a(30270),n=a(12902),r=a(48399);const s=(0,l.Ue)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,a)=>{e((0,n.ZP)((e=>{if("block_script"===a){let a=e.blockedScripts;if(t.urls){for(const[e,l]of Object.entries(t.urls)){if(!l||0===l.length)continue;let e=!1;for(const[t,n]of Object.entries(a))l===t&&(e=!0);e||(a[l]=l)}e.blockedScripts=a}}const l=e.scripts[a].findIndex((e=>e.id===t.id));-1!==l&&(e.scripts[a][l]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:a,plugins:l,scripts:n,placeholders:r,blocked_scripts:s}=await c();let i=n;i.block_script.forEach(((e,t)=>{e.id=t})),i.add_script.forEach(((e,t)=>{e.id=t})),i.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:a,plugins:l,scripts:i,fetching:!1,placeholders:r,blockedScripts:s})))},addScript:a=>{e({fetching:!0}),e((0,n.ZP)((e=>{e.scripts[a].push({name:"general",id:e.scripts[a].length,enable:!0})})));let l=t().scripts;return r.doAction("update_scripts",{scripts:l}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(a,l)=>{e({fetching:!0}),e((0,n.ZP)((e=>{const t=e.scripts[l].findIndex((e=>e.id===a.id));-1!==t&&(e.scripts[l][t]=a)})));let s=t().scripts;return r.doAction("update_scripts",{scripts:s}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(a,l)=>{e({fetching:!0}),e((0,n.ZP)((e=>{const t=e.scripts[l].findIndex((e=>e.id===a.id));-1!==t&&e.scripts[l].splice(t,1)})));let s=t().scripts;return r.doAction("update_scripts",{scripts:s}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,a)=>{e({fetching:!0}),e((0,n.ZP)((e=>{const l=e.plugins.findIndex((e=>e.id===t));-1!==l&&(e.plugins[l].enabled=a)})));const l=await r.doAction("update_plugin_status",{plugin:t,enabled:a}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),l},updatePlaceholderStatus:async(t,a,l)=>{e({fetching:!0}),l&&e((0,n.ZP)((e=>{const l=e.plugins.findIndex((e=>e.id===t));-1!==l&&(e.plugins[l].placeholder=a?"enabled":"disabled")})));const s=await r.doAction("update_placeholder_status",{id:t,enabled:a}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),s}}))),c=()=>r.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))},73086:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var l=a(69307),n=a(85671),r=a(65736),s=a(56293),c=a(60849),i=a(82485),o=a(99196),d=a(38857);const u=(0,o.memo)((()=>{const{updatePlaceholderStatus:e,integrationsLoaded:t,services:o,fetchIntegrationsData:u}=(0,n.default)(),[p,h]=(0,l.useState)([]),[m,g]=(0,l.useState)(""),[f,b]=(0,l.useState)(!1),[_,v]=(0,l.useState)(!1),[y,E]=(0,l.useState)(""),[k,w]=(0,l.useState)(""),{updateField:S,getField:z,getFieldValue:C,saveFields:F,setChangedField:P,addHelpNotice:N}=(0,s.default)(),{selectedSubMenuItem:x}=(0,i.default)(),[A,I]=(0,l.useState)(null);(0,l.useEffect)((()=>{a.e(44).then(a.bind(a,90044)).then((e=>{let{default:t}=e;I((()=>t))}))}),[]),(0,l.useEffect)((()=>{t||u(),t&&(1==C("safe_mode")?(E((0,r.__)("Safe Mode enabled. To manage integrations, disable Safe Mode under Tools - Support.","complianz-gdpr")),b(!0)):"yes"!==C("uses_thirdparty_services")&&"yes"!==C("uses_social_media")&&"yes"!==C("uses_ad_cookies")&&(E((0,r.__)("Third-party services and social media are marked as not being used on your website in the wizard.","complianz-gdpr")),w("#wizard/services"),b(!0)))}),[t]),(0,l.useEffect)((()=>{Z()}),[o]);const Z=()=>{let e=[...o];e.forEach((function(t,a){let l={...t},n=z(t.source);if("multicheckbox"===n.type){let e=n.value;Array.isArray(e)||(e=[]),l.enabled=e.includes(t.id)}else l.enabled="yes"===n.value;e[a]=l})),h(e);let t="yes"===C("block_recaptcha_service"),a=o.filter((e=>"google-recaptcha"===e.id))[0];t&&a&&a.enabled&&N("integrations-services","warning",(0,r.__)("reCaptcha is connected and will be blocked before consent. To change your settings, disable reCaptcha in the list.","complianz-gdpr"),(0,r.__)("reCaptcha blocking enabled","complianz-gdpr"),"#wizard/services")};(0,l.useEffect)((()=>{if(0===p.length)return;let e="yes";0===p.filter((e=>!0===e.enabled&&"thirdparty_services_on_site"===e.source)).length&&(e="no"),C("uses_thirdparty_services")!==e&&(S("uses_thirdparty_services",e),P("uses_thirdparty_services",e));let t="yes";0===p.filter((e=>!0===e.enabled&&"thirdparty_services_on_site"===e.source)).length&&(t="no"),C("uses_social_media")!==t&&(S("uses_social_media",t),P("uses_social_media",t))}),[p]);const L=[{name:(0,r.__)("Service","complianz-gdpr"),selector:e=>e.label,sortable:!0,grow:5},{name:(0,r.__)("Placeholder","complianz-gdpr"),selector:e=>e.placeholderControl,sortable:!0,sortFunction:(e,t)=>{const a=e.placeholder,l=t.placeholder;return a>l?1:l>a?-1:0},grow:2},{name:(0,r.__)("Status","complianz-gdpr"),selector:e=>e.enabledControl,sortable:!0,sortFunction:(e,t)=>{const a=e.enabled,l=t.enabled;return a>l?1:l>a?-1:0},grow:1,right:!0}];let T=p.filter((e=>e.label.toLowerCase().includes(m.toLowerCase())));return T.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0)),T.forEach((t=>{let a=C(t.source);Array.isArray(a)?t.enabled=a.includes(t.id):t.enabled="yes"===a,t.enabledControl=(0,l.createElement)(d.default,{disabled:_,value:t.enabled,onChange:e=>(async(e,t)=>{v(!0);let a,l=z(e.source);"multicheckbox"===l.type?(a=[...l.value],Array.isArray(a)||(a=[]),t?a.push(e.id):a=a.filter((t=>t!==e.id))):a=t?"yes":"no",S(e.source,a),P(e.source,a),F(x,!1).then((()=>{u().then((()=>{Z(),v(!1)}))}))})(t,e),className:"cmplz-switch-input-tiny"}),t.placeholderControl=(0,l.createElement)(l.Fragment,null," ","none"!==t.placeholder&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)(d.default,{disabled:"none"===t.placeholder||_,value:"enabled"===t.placeholder,onChange:a=>(async(t,a)=>{v(!0);let l=[...p],n=l.findIndex((e=>e.id===t.id));l[n].placeholder=a?"enabled":"disabled",h(l),await e(t.id,a),v(!1)})(t,a),className:"cmplz-switch-input-tiny"})))})),(0,l.createElement)(l.Fragment,null,(0,l.createElement)("p",null,(0,r.__)("Enabled services will be blocked on the front-end of your website until the user has given consent (opt-in), or after the user has revoked consent (opt-out). When possible a placeholder is activated. You can also disable or configure the placeholder to your liking.","complianz-gdpr"),(0,c.default)("https://complianz.io/blocking-recaptcha-manually/")),(0,l.createElement)("div",{className:"cmplz-table-header"},(0,l.createElement)("div",{className:"cmplz-table-header-controls"},(0,l.createElement)("input",{type:"text",placeholder:(0,r.__)("Search","complianz-gdpr"),value:m,onChange:e=>g(e.target.value)}))),(f||0===T.length)&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"cmplz-settings-overlay"},(0,l.createElement)("div",{className:"cmplz-settings-overlay-message"},y,k&&(0,l.createElement)(l.Fragment,null," ",(0,l.createElement)("a",{href:k},(0,r.__)("View services.","complianz-gdpr")))))),0===T.length&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"cmplz-integrations-placeholder"},(0,l.createElement)("div",null),(0,l.createElement)("div",null),(0,l.createElement)("div",null),(0,l.createElement)("div",null),(0,l.createElement)("div",null),(0,l.createElement)("div",null))),!f&&T.length>0&&A&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)(A,{columns:L,data:T,dense:!0,pagination:!0,paginationPerPage:5,noDataComponent:(0,l.createElement)("div",{className:"cmplz-no-documents"},(0,r.__)("No services","really-simple-ssl")),persistTableHead:!0,theme:"really-simple-plugins",customStyles:{headCells:{style:{paddingLeft:"0",paddingRight:"0"}},cells:{style:{paddingLeft:"0",paddingRight:"0"}}}})))}))},60849:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var l=a(69307),n=a(65736),r=a(99950);const s=e=>(0,l.createElement)(l.Fragment,null," ",(0,l.createElement)(r.default,{url:e,text:(0,n.__)("For more information, please read this %sarticle%s.","complianz-gdpr")})," ")},57898:(e,t,a)=>{a.d(t,{D:()=>n});var l=a(99196);function n(e){const t=(0,l.useRef)({value:e,previous:e});return(0,l.useMemo)((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}}}]);