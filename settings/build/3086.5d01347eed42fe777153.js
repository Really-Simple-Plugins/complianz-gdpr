"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[3086,8857,5671,849],{38857:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var r=a(69307),n=a(87462),l=a(99196),s=a(36206),c=a(28771),i=a(25360),o=a(77342),d=a(57898),u=a(7546),p=a(75320);const h="Switch",[m,g]=(0,i.b)(h),[f,b]=m(h),_=(0,l.forwardRef)(((e,t)=>{const{__scopeSwitch:a,name:r,checked:i,defaultChecked:d,required:u,disabled:h,value:m="on",onCheckedChange:g,...b}=e,[_,E]=(0,l.useState)(null),k=(0,c.e)(t,(e=>E(e))),w=(0,l.useRef)(!1),S=!_||Boolean(_.closest("form")),[z=!1,C]=(0,o.T)({prop:i,defaultProp:d,onChange:g});return(0,l.createElement)(f,{scope:a,checked:z,disabled:h},(0,l.createElement)(p.WV.button,(0,n.Z)({type:"button",role:"switch","aria-checked":z,"aria-required":u,"data-state":y(z),"data-disabled":h?"":void 0,disabled:h,value:m},b,{ref:k,onClick:(0,s.M)(e.onClick,(e=>{C((e=>!e)),S&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())}))})),S&&(0,l.createElement)(v,{control:_,bubbles:!w.current,name:r,value:m,checked:z,required:u,disabled:h,style:{transform:"translateX(-100%)"}}))})),v=e=>{const{control:t,checked:a,bubbles:r=!0,...s}=e,c=(0,l.useRef)(null),i=(0,d.D)(a),o=(0,u.t)(t);return(0,l.useEffect)((()=>{const e=c.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(i!==a&&n){const t=new Event("click",{bubbles:r});n.call(e,a),e.dispatchEvent(t)}}),[i,a,r]),(0,l.createElement)("input",(0,n.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:a},s,{tabIndex:-1,ref:c,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return e?"checked":"unchecked"}const E=_,k=(0,l.forwardRef)(((e,t)=>{const{__scopeSwitch:a,...r}=e,s=b("SwitchThumb",a);return(0,l.createElement)(p.WV.span,(0,n.Z)({"data-state":y(s.checked),"data-disabled":s.disabled?"":void 0},r,{ref:t}))}));var w=a(56293),S=(0,r.memo)((e=>{let{value:t,onChange:a,required:n,disabled:l,className:s,label:c,id:i}=e;const{getField:o}=(0,w.default)();let d=t;return"0"!==t&&"1"!==t||(d="1"===t),(0,r.createElement)("div",{className:"cmplz-input-group cmplz-switch-group"},(0,r.createElement)(E,{className:"cmplz-switch-root "+s,checked:d,onCheckedChange:e=>{"banner"===o(i).data_target&&(e=e?"1":"0"),a(e)},disabled:l,required:n},(0,r.createElement)(k,{className:"cmplz-switch-thumb"})))}))},85671:function(e,t,a){a.r(t);var r=a(30270),n=a(12902),l=a(48399);const s=(0,r.Ue)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,a)=>{e((0,n.ZP)((e=>{if("block_script"===a){let a=e.blockedScripts;if(t.urls){for(const[e,r]of Object.entries(t.urls)){if(!r||0===r.length)continue;let e=!1;for(const[t,n]of Object.entries(a))r===t&&(e=!0);e||(a[r]=r)}e.blockedScripts=a}}const r=e.scripts[a].findIndex((e=>e.id===t.id));-1!==r&&(e.scripts[a][r]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:a,plugins:r,scripts:n,placeholders:l,blocked_scripts:s}=await c();let i=n;i.block_script&&i.block_script.length>0&&i.block_script.forEach(((e,t)=>{e.id=t})),i.add_script&&i.add_script.length>0&&i.add_script.forEach(((e,t)=>{e.id=t})),i.whitelist_script&&i.whitelist_script.length>0&&i.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:a,plugins:r,scripts:i,fetching:!1,placeholders:l,blockedScripts:s})))},addScript:a=>{e({fetching:!0}),t().scripts[a]&&Array.isArray(t().scripts[a])||e((0,n.ZP)((e=>{e.scripts[a]=[]}))),e((0,n.ZP)((e=>{e.scripts[a].push({name:"general",id:e.scripts[a].length,enable:!0})})));let r=t().scripts;return l.doAction("update_scripts",{scripts:r}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(a,r)=>{e({fetching:!0}),t().scripts[r]&&Array.isArray(t().scripts[r])||e((0,n.ZP)((e=>{e.scripts[r]=[]}))),e((0,n.ZP)((e=>{const t=e.scripts[r].findIndex((e=>e.id===a.id));-1!==t&&(e.scripts[r][t]=a)})));let s=t().scripts;return l.doAction("update_scripts",{scripts:s}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(a,r)=>{e({fetching:!0}),t().scripts[r]&&Array.isArray(t().scripts[r])||e((0,n.ZP)((e=>{e.scripts[r]=[]}))),e((0,n.ZP)((e=>{const t=e.scripts[r].findIndex((e=>e.id===a.id));-1!==t&&e.scripts[r].splice(t,1)})));let s=t().scripts;return l.doAction("update_scripts",{scripts:s}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,a)=>{e({fetching:!0}),e((0,n.ZP)((e=>{const r=e.plugins.findIndex((e=>e.id===t));-1!==r&&(e.plugins[r].enabled=a)})));const r=await l.doAction("update_plugin_status",{plugin:t,enabled:a}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),r},updatePlaceholderStatus:async(t,a,r)=>{e({fetching:!0}),r&&e((0,n.ZP)((e=>{const r=e.plugins.findIndex((e=>e.id===t));-1!==r&&(e.plugins[r].placeholder=a?"enabled":"disabled")})));const s=await l.doAction("update_placeholder_status",{id:t,enabled:a}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),s}})));t.default=s;const c=()=>l.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))},73086:function(e,t,a){a.r(t);var r=a(69307),n=a(85671),l=a(65736),s=a(56293),c=a(60849),i=a(82485),o=a(38857);t.default=(0,r.memo)((()=>{const{updatePlaceholderStatus:e,integrationsLoaded:t,services:d,fetchIntegrationsData:u}=(0,n.default)(),[p,h]=(0,r.useState)([]),[m,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(!1),[_,v]=(0,r.useState)(!1),[y,E]=(0,r.useState)(""),[k,w]=(0,r.useState)(""),{updateField:S,getField:z,getFieldValue:C,saveFields:A,setChangedField:P,addHelpNotice:F}=(0,s.default)(),{selectedSubMenuItem:N}=(0,i.default)(),[x,Z]=(0,r.useState)(null);(0,r.useEffect)((()=>{a.e(44).then(a.bind(a,90044)).then((e=>{let{default:t}=e;Z((()=>t))}))}),[]),(0,r.useEffect)((()=>{t||u(),t&&(1==C("safe_mode")?(E((0,l.__)("Safe Mode enabled. To manage integrations, disable Safe Mode under Tools - Support.","complianz-gdpr")),b(!0)):"yes"!==C("uses_thirdparty_services")&&"yes"!==C("uses_social_media")&&"yes"!==C("uses_ad_cookies")&&(E((0,l.__)("Third-party services and social media are marked as not being used on your website in the wizard.","complianz-gdpr")),w("#wizard/services"),b(!0)))}),[t]),(0,r.useEffect)((()=>{I()}),[d]);const I=()=>{let e=[...d];e.forEach((function(t,a){let r={...t},n=z(t.source);if("multicheckbox"===n.type){let e=n.value;Array.isArray(e)||(e=[]),r.enabled=e.includes(t.id)}else r.enabled="yes"===n.value;e[a]=r})),h(e);let t="yes"===C("block_recaptcha_service"),a=d.filter((e=>"google-recaptcha"===e.id))[0];t&&a&&a.enabled&&F("integrations-services","warning",(0,l.__)("reCaptcha is connected and will be blocked before consent. To change your settings, disable reCaptcha in the list.","complianz-gdpr"),(0,l.__)("reCaptcha blocking enabled","complianz-gdpr"),"#wizard/services")};(0,r.useEffect)((()=>{if(0===p.length)return;let e="yes";0===p.filter((e=>!0===e.enabled&&"thirdparty_services_on_site"===e.source)).length&&(e="no"),C("uses_thirdparty_services")!==e&&(S("uses_thirdparty_services",e),P("uses_thirdparty_services",e));let t="yes";0===p.filter((e=>!0===e.enabled&&"socialmedia_on_site"===e.source)).length&&(t="no"),C("uses_social_media")!==t&&(S("uses_social_media",t),P("uses_social_media",t))}),[p]);const L=[{name:(0,l.__)("Service","complianz-gdpr"),selector:e=>e.label,sortable:!0,grow:5},{name:(0,l.__)("Placeholder","complianz-gdpr"),selector:e=>e.placeholderControl,sortable:!0,sortFunction:(e,t)=>{const a=e.placeholder,r=t.placeholder;return a>r?1:r>a?-1:0},grow:2},{name:(0,l.__)("Status","complianz-gdpr"),selector:e=>e.enabledControl,sortable:!0,sortFunction:(e,t)=>{const a=e.enabled,r=t.enabled;return a>r?1:r>a?-1:0},grow:1,right:!0}];let T=p.filter((e=>e.label.toLowerCase().includes(m.toLowerCase())));return T.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0)),T.forEach((t=>{let a=C(t.source);Array.isArray(a)?t.enabled=a.includes(t.id):t.enabled="yes"===a,t.enabledControl=(0,r.createElement)(o.default,{disabled:_,value:t.enabled,onChange:e=>(async(e,t)=>{v(!0);let a,r=z(e.source);if("multicheckbox"===r.type){let n=r.value;Array.isArray(n)||(n=[]),a=[...n],Array.isArray(a)||(a=[]),t?a.push(e.id):a=a.filter((t=>t!==e.id))}else a=t?"yes":"no";S(e.source,a),P(e.source,a),await A(N,!1),await u(),v(!1)})(t,e),className:"cmplz-switch-input-tiny"}),t.placeholderControl=(0,r.createElement)(r.Fragment,null," ","none"!==t.placeholder&&t.enabled&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.default,{disabled:_,value:"enabled"===t.placeholder,onChange:a=>(async(t,a)=>{v(!0);let r=[...p],n=r.findIndex((e=>e.id===t.id));r[n].placeholder=a?"enabled":"disabled",h(r),await e(t.id,a),v(!1)})(t,a),className:"cmplz-switch-input-tiny"})))})),(0,r.createElement)(r.Fragment,null,(0,r.createElement)("p",null,(0,l.__)("Enabled services will be blocked on the front-end of your website until the user has given consent (opt-in), or after the user has revoked consent (opt-out). When possible a placeholder is activated. You can also disable or configure the placeholder to your liking.","complianz-gdpr"),(0,c.default)("https://complianz.io/blocking-recaptcha-manually/")),(0,r.createElement)("div",{className:"cmplz-table-header"},(0,r.createElement)("div",{className:"cmplz-table-header-controls"},(0,r.createElement)("input",{type:"text",placeholder:(0,l.__)("Search","complianz-gdpr"),value:m,onChange:e=>g(e.target.value)}))),(f||0===T.length)&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"cmplz-settings-overlay"},(0,r.createElement)("div",{className:"cmplz-settings-overlay-message"},y,k&&(0,r.createElement)(r.Fragment,null," ",(0,r.createElement)("a",{href:k},(0,l.__)("View services","complianz-gdpr")))))),0===T.length&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"cmplz-integrations-placeholder"},(0,r.createElement)("div",null),(0,r.createElement)("div",null),(0,r.createElement)("div",null),(0,r.createElement)("div",null),(0,r.createElement)("div",null),(0,r.createElement)("div",null))),!f&&T.length>0&&x&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(x,{columns:L,data:T,dense:!0,pagination:!0,paginationPerPage:5,noDataComponent:(0,r.createElement)("div",{className:"cmplz-no-documents"},(0,l.__)("No services","complianz-gdpr")),persistTableHead:!0,theme:"really-simple-plugins",customStyles:{headCells:{style:{paddingLeft:"0",paddingRight:"0"}},cells:{style:{paddingLeft:"0",paddingRight:"0"}}}})))}))},60849:function(e,t,a){a.r(t);var r=a(69307),n=a(65736),l=a(99950);t.default=e=>(0,r.createElement)(r.Fragment,null," ",(0,r.createElement)(l.default,{url:e,target:"_blank",rel:"noopener noreferrer",text:(0,n.__)("For more information, please read this %sarticle%s.","complianz-gdpr")})," ")},57898:function(e,t,a){a.d(t,{D:function(){return n}});var r=a(99196);function n(e){const t=(0,r.useRef)({value:e,previous:e});return(0,r.useMemo)((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}}}]);